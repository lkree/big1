"use strict";const form=document.querySelector("#new_customer"),onFormSubmit=e=>{const t=()=>{let r,n,o;const a=e=>{const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,function(e){return t[e]})};return t.checkRegion=(()=>{return"41"===(e=>{const t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0})("region_id")&&(o=!0),t}),t.getUserInfo=(()=>o?t:(r=[a(e.target.querySelector("#customer_name").value)||"",a(e.target.querySelector("#customer_contact_attributes_phone").value)||"",a(e.target.querySelector("#customer_email").value)||"",a(e.target.querySelector("#customer_family_name").value)||""],t)),t.handleInfo=(()=>o?t:((()=>{let e;const t=()=>t;return t.replaceChars=(()=>(e=r.map(e=>(e=>{const t={" ":"+","@":"%40"};return e.replace(/[@ ]/g,e=>t[e])})(e)),e=_.object(["name","phone","email","surname"],e),t)),t.prepareQuery=(()=>{let r,o,{name:a,email:u,phone:c,surname:s}=e;return a=a?`fields%5BNAME%5D=${a}&`:"",c=c?`&fields%5BPHONE%5D%5B0%5D%5BVALUE%5D=${c}&fields%5BPHONE%5D%5B0%5D%5BVALUE_TYPE%5D=WORK&`:"",u=u?`fields%5BEMAIL%5D%5B0%5D%5BVALUE%5D=${u}&fields%5BEMAIL%5D%5B0%5D%5BVALUE_TYPE%5D=HOME&`:"",o="fields%5BSOURCE_ID%5D=WEB&",r=`TITLE%5D=%D0%A0%D0%B5%D0%B3%D0%B8%D1%81%D1%82%D1%80%D0%B0%D1%86%D0%B8%D1%8F+%D0%BD%D0%B0+big1.ru+${e.name}&`,n=((...e)=>e.reduce((e,t)=>e+t))("fields%5B",r,o,a,c,u,s=`fields%5BLAST_NAME%5D=${s}`),t}),t})().replaceChars().prepareQuery(),t)),t.sendData=(()=>{if(o)return t;const e=new XMLHttpRequest;return e.open("POST","https://avtodizel.bitrix24.ru/rest/391/8ttk4n73qu03obq6/crm.lead.add.json/"),e.send(n),t}),t};t().checkRegion().getUserInfo().handleInfo().sendData()};form.addEventListener("submit",onFormSubmit);