"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}}$(document).on("DOMContentLoaded",function(){var t="closed",e=window.type||"car",n=500,o=501,r=function(t){return!!t},i=function(t){return!!t[0]},a=function(t,e,n){t[e]=n},c=function(t,e){t[e]},l=function(t,e){try{return t()}catch(t){return e()}},s=function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];$("#js-laximo-chassis-options, #js-laximo-wizard-options, .laximo").each(function(){t?$(this).slideDown(n):$(this).css("display","none")})},u=function(){var t={},e=function(){s(!0);var t=$(".options-wrapper");t.slideUp(),setTimeout(p,o),t.off("click",e),t.remove()};(function(){t=$("<div>",{text:"Подбор по параметрам",class:"options-wrapper"});var e=$(".lx-sel-or").first();"block"===$(".options-wrapper").css("display")||e.after(t)})(),s(!0),t.on("click",e)},d=function(t){Array.isArray(t)?$(t).each(function(){$(this).remove()}):$(t).html("")},f=function(t){var e=r(t[0].value),n=$("<div>",{class:"laximo-div-selectors-wrapper"}),o=$("<div>",{class:"lx-b-sel-tm"});$(t).each(function(){$("<div>",{text:$(this).text(),class:e?"laximo-div-selector":"laximo-div-selector--no-hover","data-id":$(this).val()}).appendTo(n)});var a=$("#js-laximo-wizard-options");if(i(a)){if(e)d(a);else{var c=[$(".laximo-div-selectors-wrapper"),$(".laximo-div-description")];d(c)}o.append(n),a.prepend(o),function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],e=$(".lx-vin-search-module .js-laximo-wizard-select"),n=$(".lx-wrap-ss"),o=$(".lx-wrap-btn-sm"),r=$("<label>",{text:"Выберите модификацию",class:"laximo-div-description"}),i=$("#js-laximo-wizard-options .lx-b-sel-tm");t&&(e.remove(),o.remove(),n.remove()),i.prepend(r),t||i.find("label").first().hide()}(e)}},p=function(){var t=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0],e=$(".laximo-in-laxTecdoc"),n=$(".cars-catalog");return"string"==typeof t&&(t="closed"==t),t?void n.css("min-height","unset"):void n.attr("style","min-height: ".concat(e.innerHeight()-200,"px"))},m=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"open",r=$(".laximo-in-laxTecdoc");i(r)&&("none"!==r.css("display")&&"close"===e?(r.slideUp(n),t="closed",setTimeout(function(){return p(t)},o)):(u(),r.slideDown(n),t="opened",setTimeout(function(){return p(t)},o)))},v=function(e){h(e.currentTarget.querySelector(".cars-catalog__name").textContent),m(),function(t){if("closed"!==t){var e=$(".b-content")[0].offsetTop-10;$("html").animate({scrollTop:e},500),setTimeout(function(){$(".fast-menu-tabs__ul-first-level").removeAttr("style"),$(".b-bot-side").removeAttr("style")},500)}}(t)},y=new(function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"init",value:function(t){if(t){var e=t.split(" ");return this.get_wizard(e)}}},{key:"get_wizard",value:function(t){var e,n,o;return e=t[0],n="no"===t[1]?"":t[1],o="no"===t[2]?"":t[2],void 0===window.location.href.split("/")[4]?$.get("laximo/".concat(e,"/wizard?key=").concat(n,"&wizard_id=").concat(o)):$.get("https://big1.ru/laximo/".concat(e,"/wizard?key=").concat(n,"&wizard_id=").concat(o))}}]),t}()),_=function(){var t=".text__template--".concat(e),n=l(function(){return document.querySelector(t).content.querySelector(".cloned-lax-list").dataset.catalogType},function(){return document.querySelector(t).querySelector(".cloned-lax-list").dataset.catalogType});y.init(n)},h=function(){var t={};return function(n){n=n.toLowerCase();var o=c(t,n);if(r(o)){if(Array.isArray(o))return void f(o);if("not-found"===o)return _(),void setTimeout(function(){f([$("<option>",{text:"В автоматическом режиме модификацию найти не удалось. Попробуйте самостоятельно.",value:""})])},1500);y.init(t[n])}else{var i=".text__template--".concat(e),s=l(function(){return document.querySelector(i).content.querySelectorAll(".cloned-lax-list option")},function(){return document.querySelector(i).querySelectorAll(".cloned-lax-list option")}),u=function(){var t=[];return function(n,o){if("другие модели"===n){var r=l(function(){return document.querySelector(".text__template--".concat(e)).content.querySelector("section").dataset.catalogType},function(){return document.querySelector(".text__template--".concat(e)).querySelector("section").dataset.catalogType});return $("<option>",{value:r})}return _toConsumableArray(o).forEach(function(e){if(n=n.toLowerCase(),~e.textContent.toLowerCase().indexOf(n)){var o=e.cloneNode(!0);t.push(o)}}),t}}()(n,s),d=u.length;switch(!0){case 0===d:a(t,n,"not-found"),_(),setTimeout(function(){f([$("<option>",{text:"В автоматическом режиме модификацию найти не удалось. Попробуйте самостоятельно.",value:""})])},1500);break;case 1<d:a(t,n,u),f(u);break;default:a(t,n,u[0].value),y.init(u[0].value)}}}}(),x=function(t){t.originalEvent.target.classList.contains("laximo-div-selector")&&(y.init(t.originalEvent.target.dataset.id),setTimeout(p,o)),function(){if(t.target.classList.contains("lx-wrap-btn-sm--help-btn")){var e=$(".chat_2j"),n=$(".menuWrap_2V");if(i(e)&&e[0].click(),i(n)){$(".container_3P").css({display:"block",opacity:"1",top:"25px","z-index":"12312313"}),$(".wrap_2g").addClass("_show_10"),n.css({position:"fixed",bottom:"0",left:"0"});var o=function(){$(".container_3P").css({display:"none",opacity:"0"}),document.removeEventListener("touchstart",o)};document.addEventListener("touchstart",o)}}}()},g=function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];i($(".cars-catalog__list--truck"))&&i($(".cars-catalog__list--car"))&&(_toConsumableArray(document.querySelectorAll(".cars-catalog__list")).forEach(function(t){return t.classList.add("hidden")}),function(){try{t&&(e="car"===e?"truck":"car"),document.querySelector(".cars-catalog__list--".concat(e)).classList.remove("hidden")}catch(t){console.log(t.message)}}())};g(!1),$(document).ready(function(){(new LaximoWizard).init()}),_toConsumableArray(document.querySelectorAll(".cars-catalog__list li img")).map(function(t){t.removeAttribute("style")}),$(".cars-catalog__item").on("click",v),$(".lx-b-lax-col-close").on("click",function(){return m("close")}),$(document).on("click",x),$(".car-type-toggler__checkbox").on("change",g)});